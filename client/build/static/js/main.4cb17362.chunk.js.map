{"version":3,"sources":["components/Auth.module.css","logo.svg","context/AuthContext.js","components/Auth.jsx","hooks/http.hook.js","components/PersonalPage.jsx","components/Any.jsx","components/NavBar.jsx","App.js","hooks/auth.hook.js","Routers/routers.js","index.js"],"names":["module","exports","AuthContext","createContext","token","userId","login","noop","logout","isAuth","Auth","auth","useContext","React","useState","email","password","name","phone","formData","setFormData","response","setResponse","loading","setLoading","delay","ms","Promise","resolve","setTimeout","request","useCallback","url","data","a","axios","post","then","res","useHttp","registHandler","message","console","log","loginHandler","className","classes","app_container","form_container","form_box","alt","src","logo","form_image","form","form_input_mail","placeholder","value","onChange","e","target","disabled","form_input_password","type","form_input_name","form_input_phone","buttons_block","button_login","onClick","button_register","answer","PersonalPage","personal_page_container","Any","NavBar","to","App","setToken","setUserId","userData","jwtToken","id","localStorage","setItem","JSON","stringify","removeItem","useEffect","parse","getItem","useAuth","routes","exact","path","useRoutes","Provider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4cb17362.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app_container\":\"Auth_app_container__2iGe_\",\"form_container\":\"Auth_form_container__1uCtI\",\"form_image\":\"Auth_form_image__18gXk\",\"form\":\"Auth_form__3aF3a\",\"form_box\":\"Auth_form_box__1ZIGx\",\"form_input_mail\":\"Auth_form_input_mail__LZq5j\",\"form_input_password\":\"Auth_form_input_password__1IeHR\",\"form_input_name\":\"Auth_form_input_name__1eMd8\",\"form_input_phone\":\"Auth_form_input_phone__3DRpM\",\"buttons_block\":\"Auth_buttons_block__3jPKi\",\"button_login\":\"Auth_button_login__3-O7L\",\"button_register\":\"Auth_button_register__1ais_\",\"answer\":\"Auth_answer__14oB0\"};","export default __webpack_public_path__ + \"static/media/logo.b4ca9fcb.svg\";","import {createContext} from 'react'\r\n\r\nfunction noop(){}\r\n\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    userId: null,\r\n    login: noop(),\r\n    logout: noop(), \r\n    isAuth: false\r\n})","import React, { useContext } from 'react'\r\nimport classes from './Auth.module.css'\r\nimport logo from '../logo.svg'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { AuthContext } from '../context/AuthContext'\r\nfunction Auth() {\r\n    const auth = useContext(AuthContext)\r\n    const [formData, setFormData] = React.useState(\r\n        {\r\n            email: '',\r\n            password: '',\r\n            name: '',\r\n            phone: ''\r\n        }\r\n    )\r\n    const [response, setResponse] = React.useState(null)\r\n    const { request, loading } = useHttp();\r\n\r\n    const registHandler = async () => {\r\n        await request('/api/auth/register', { ...formData },).then(res => {\r\n            setResponse(res.data.message)\r\n            console.log(res.data.message)\r\n        })\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            await request('/api/auth/login', { ...formData },).then(res => {\r\n                setResponse(res.data.message)\r\n                console.log(res.data)\r\n                auth.login(res.data.token, res.data.userId)\r\n            })\r\n        } catch (e) {\r\n            console.log('error: ', e)\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={classes.app_container}>\r\n            <div className={classes.form_container}>\r\n                <div className={classes.form_box}>\r\n                    <img alt=\"logo\" src={logo} className={classes.form_image} />\r\n                    <form className={classes.form}>\r\n                        <input\r\n                            className={classes.form_input_mail}\r\n                            name=\"email\"\r\n                            placeholder=\"email\"\r\n                            value={formData.email}\r\n                            onChange={(e) => setFormData({ ...formData, [e.target.name]: e.target.value })}\r\n                            disabled={loading}\r\n                        />\r\n                        <input\r\n                            className={classes.form_input_password}\r\n                            name=\"password\"\r\n                            placeholder=\"пароль, не меньше 6 символов\"\r\n                            type=\"password\"\r\n                            value={formData.password}\r\n                            onChange={(e) => setFormData({ ...formData, [e.target.name]: e.target.value })}\r\n                            disabled={loading}\r\n                        />\r\n                        <input\r\n                            className={classes.form_input_name}\r\n                            name=\"name\"\r\n                            placeholder=\"имя\"\r\n                            value={formData.name}\r\n                            onChange={(e) => setFormData({ ...formData, [e.target.name]: e.target.value })}\r\n                            disabled={loading}\r\n                        />\r\n                        <input\r\n                            className={classes.form_input_phone}\r\n                            name=\"phone\"\r\n                            placeholder=\"+7 (xxx) xxx-xx-xx\"\r\n                            value={formData.phone}\r\n                            onChange={(e) => setFormData({ ...formData, [e.target.name]: e.target.value })}\r\n                            disabled={loading}\r\n                        />\r\n                        <div className={classes.buttons_block}>\r\n                            <button className={classes.button_login} disabled={loading} onClick={() => loginHandler()}>вход</button>\r\n                            <button className={classes.button_register} disabled={loading} onClick={() => registHandler()}>регистрация</button>\r\n                        </div>\r\n                        {response && <div className={classes.answer}>{response}</div>}\r\n                    </form>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Auth;\r\n","import { useState, useCallback } from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\n\r\nexport const useHttp = () => {\r\n\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const delay = (ms) => {\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                resolve()\r\n            }, ms)\r\n        })\r\n    }\r\n\r\n\r\n    const request = useCallback(async (url, data) => {\r\n        setLoading(true)\r\n        const response = await axios.post(url, { ...data })\r\n            .then(res => res)\r\n        await delay(1)\r\n        setLoading(false)\r\n        return response\r\n    }, [])\r\n\r\n\r\n\r\n    return { request, loading }\r\n}\r\n\r\n","import React, { useContext } from 'react'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport classes from './PersonalPage.module.css'\r\n\r\n\r\nexport const PersonalPage = () => {\r\n    // const { logout } = useContext(AuthContext)\r\n    return (\r\n        <div className={classes.personal_page_container}>\r\n            {/* <button onClick={() => logout()}>выход</button> */}\r\n            <div>\r\n                вы в личном кабинете\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport classes from './PersonalPage.module.css'\r\n\r\n\r\nexport const Any = () => {\r\n    // const { logout } = useContext(AuthContext)\r\n    return (\r\n        <div className={classes.personal_page_container}>\r\n            <div>\r\n                ANY\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useContext } from 'react'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport classes from './PersonalPage.module.css'\r\nimport {Link} from 'react-router-dom'\r\n\r\n\r\nexport const NavBar = () => {\r\n    const { logout } = useContext(AuthContext)\r\n    return (\r\n        <div className={classes.personal_page_container}>\r\n            <button onClick={() => logout()}>выход</button>\r\n            <Link to='/Any'>Any</Link>\r\n            <Link to='/PersonalPage'>PersonalPage</Link>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { BrowserRouter as Router} from 'react-router-dom'\r\nimport { useRoutes } from './Routers/routers'\r\nimport { useAuth } from './hooks/auth.hook'\r\nimport { AuthContext } from './context/AuthContext'\r\n\r\nfunction App() {\r\n  const { token, userId, login, logout} = useAuth()\r\n  const isAuth = !!token\r\n  const routes = useRoutes(isAuth)\r\n  \r\n  return (\r\n    <AuthContext.Provider value={{token, userId, login, logout, isAuth}}>\r\n      <Router>\r\n        <div>\r\n          {routes}\r\n        </div>\r\n      </Router>\r\n    </AuthContext.Provider>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import { useState, useCallback, useEffect } from 'react'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [userId, setUserId] = useState(null)\r\n\r\n    const userData = \"userData\"\r\n\r\n    const login = useCallback(\r\n        (jwtToken, id) => {\r\n            setToken(jwtToken)\r\n            setUserId(id)\r\n            \r\n            localStorage.setItem(userData, JSON.stringify({ jwtToken, id }))\r\n\r\n        }, [])\r\n\r\n    const logout = useCallback(\r\n        () => {\r\n            setToken(null)\r\n            setUserId(null)\r\n\r\n            localStorage.removeItem(userData)\r\n        }, [])\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(userData))\r\n        if (data && data.jwtToken) {\r\n            \r\n            login(data.jwtToken, data.id)\r\n        }\r\n    }, [login])\r\n\r\n    return { login, logout, token, userId }\r\n}","import React, { useContext } from 'react'\r\nimport { Switch, Route, Redirect, Link } from 'react-router-dom'\r\nimport Auth from '../components/Auth'\r\nimport { PersonalPage } from '../components/PersonalPage'\r\nimport { Any } from '../components/Any'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { NavBar } from '../components/NavBar'\r\n\r\n\r\nexport const useRoutes = (isAuth) => {\r\n    const auth = useContext(AuthContext)\r\n    console.log('auth', auth)\r\n\r\n\r\n    if (isAuth) {\r\n        return (\r\n            <div>\r\n               <NavBar/>\r\n                <Switch>\r\n                    < Route exact path='/PersonalPage' >\r\n                        <PersonalPage />\r\n                    </Route >\r\n                    < Route exact path='/Any' >\r\n                        <Any />\r\n                    </Route >\r\n                    <Redirect to='/PersonalPage' />\r\n                </Switch>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <Switch>\r\n            < Route exact path='/' >\r\n                <Auth />\r\n            </Route >\r\n            <Redirect to='/' />\r\n        </Switch >\r\n    )\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}