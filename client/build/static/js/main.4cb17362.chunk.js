(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,n){},39:function(e,t,n){},4:function(e,t,n){e.exports={app_container:"Auth_app_container__2iGe_",form_container:"Auth_form_container__1uCtI",form_image:"Auth_form_image__18gXk",form:"Auth_form__3aF3a",form_box:"Auth_form_box__1ZIGx",form_input_mail:"Auth_form_input_mail__LZq5j",form_input_password:"Auth_form_input_password__1IeHR",form_input_name:"Auth_form_input_name__1eMd8",form_input_phone:"Auth_form_input_phone__3DRpM",buttons_block:"Auth_buttons_block__3jPKi",button_login:"Auth_button_login__3-O7L",button_register:"Auth_button_register__1ais_",answer:"Auth_answer__14oB0"}},64:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(31),s=n.n(o),u=(n(39),n(15)),i=n(2),l=n(12),j=n(11),b=n.n(j),_=n(8),d=n(17),m=n(10),p=n(4),O=n.n(p),h=n.p+"static/media/logo.b4ca9fcb.svg",f=n(32),x=n.n(f);var g=Object(r.createContext)({token:null,userId:null,login:void 0,logout:void 0,isAuth:!1});var v=function(){var e=Object(r.useContext)(g),t=c.a.useState({email:"",password:"",name:"",phone:""}),n=Object(m.a)(t,2),o=n[0],s=n[1],u=c.a.useState(null),i=Object(m.a)(u,2),j=i[0],p=i[1],f=function(){var e=Object(r.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],c=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))};return{request:Object(r.useCallback)(function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,x.a.post(t,Object(_.a)({},n)).then((function(e){return e}));case 3:return r=e.sent,e.next=6,c(1);case 6:return a(!1),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),loading:n}}(),v=f.request,k=f.loading,w=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/api/auth/register",Object(_.a)({},o)).then((function(e){p(e.data.message),console.log(e.data.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var t=Object(d.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v("/api/auth/login",Object(_.a)({},o)).then((function(t){p(t.data.message),console.log(t.data),e.login(t.data.token,t.data.userId)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("error: ",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)("div",{className:O.a.app_container,children:Object(a.jsx)("div",{className:O.a.form_container,children:Object(a.jsxs)("div",{className:O.a.form_box,children:[Object(a.jsx)("img",{alt:"logo",src:h,className:O.a.form_image}),Object(a.jsxs)("form",{className:O.a.form,children:[Object(a.jsx)("input",{className:O.a.form_input_mail,name:"email",placeholder:"email",value:o.email,onChange:function(e){return s(Object(_.a)(Object(_.a)({},o),{},Object(l.a)({},e.target.name,e.target.value)))},disabled:k}),Object(a.jsx)("input",{className:O.a.form_input_password,name:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c, \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",type:"password",value:o.password,onChange:function(e){return s(Object(_.a)(Object(_.a)({},o),{},Object(l.a)({},e.target.name,e.target.value)))},disabled:k}),Object(a.jsx)("input",{className:O.a.form_input_name,name:"name",placeholder:"\u0438\u043c\u044f",value:o.name,onChange:function(e){return s(Object(_.a)(Object(_.a)({},o),{},Object(l.a)({},e.target.name,e.target.value)))},disabled:k}),Object(a.jsx)("input",{className:O.a.form_input_phone,name:"phone",placeholder:"+7 (xxx) xxx-xx-xx",value:o.phone,onChange:function(e){return s(Object(_.a)(Object(_.a)({},o),{},Object(l.a)({},e.target.name,e.target.value)))},disabled:k}),Object(a.jsxs)("div",{className:O.a.buttons_block,children:[Object(a.jsx)("button",{className:O.a.button_login,disabled:k,onClick:function(){return A()},children:"\u0432\u0445\u043e\u0434"}),Object(a.jsx)("button",{className:O.a.button_register,disabled:k,onClick:function(){return w()},children:"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),j&&Object(a.jsx)("div",{className:O.a.answer,children:j})]})]})})})},k=n(14),w=n.n(k),A=function(){return Object(a.jsx)("div",{className:w.a.personal_page_container,children:Object(a.jsx)("div",{children:"\u0432\u044b \u0432 \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435"})})},N=function(){return Object(a.jsx)("div",{className:w.a.personal_page_container,children:Object(a.jsx)("div",{children:"ANY"})})},C=function(){var e=Object(r.useContext)(g).logout;return Object(a.jsxs)("div",{className:w.a.personal_page_container,children:[Object(a.jsx)("button",{onClick:function(){return e()},children:"\u0432\u044b\u0445\u043e\u0434"}),Object(a.jsx)(u.b,{to:"/Any",children:"Any"}),Object(a.jsx)(u.b,{to:"/PersonalPage",children:"PersonalPage"})]})};var I=function(){var e=function(){var e=Object(r.useState)(null),t=Object(m.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(m.a)(c,2),s=o[0],u=o[1],i="userData",l=Object(r.useCallback)((function(e,t){a(e),u(t),localStorage.setItem(i,JSON.stringify({jwtToken:e,id:t}))}),[]),j=Object(r.useCallback)((function(){a(null),u(null),localStorage.removeItem(i)}),[]);return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem(i));e&&e.jwtToken&&l(e.jwtToken,e.id)}),[l]),{login:l,logout:j,token:n,userId:s}}(),t=e.token,n=e.userId,c=e.login,o=e.logout,s=!!t,l=function(e){var t=Object(r.useContext)(g);return console.log("auth",t),e?Object(a.jsxs)("div",{children:[Object(a.jsx)(C,{}),Object(a.jsxs)(i.d,{children:[Object(a.jsx)(i.b,{exact:!0,path:"/PersonalPage",children:Object(a.jsx)(A,{})}),Object(a.jsx)(i.b,{exact:!0,path:"/Any",children:Object(a.jsx)(N,{})}),Object(a.jsx)(i.a,{to:"/PersonalPage"})]})]}):Object(a.jsxs)(i.d,{children:[Object(a.jsx)(i.b,{exact:!0,path:"/",children:Object(a.jsx)(v,{})}),Object(a.jsx)(i.a,{to:"/"})]})}(s);return Object(a.jsx)(g.Provider,{value:{token:t,userId:n,login:c,logout:o,isAuth:s},children:Object(a.jsx)(u.a,{children:Object(a.jsx)("div",{children:l})})})};s.a.render(Object(a.jsx)(I,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.4cb17362.chunk.js.map